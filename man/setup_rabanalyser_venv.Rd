% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{setup_rabanalyser_venv}
\alias{setup_rabanalyser_venv}
\title{Setup RabAnalyser Python Virtual Environment}
\usage{
setup_rabanalyser_venv(
  envname = "rabanalyser-venv",
  python = NULL,
  update = FALSE,
  create = TRUE
)
}
\arguments{
\item{envname}{Character. Name of the virtual environment. The environment
will be created in the standard reticulate virtualenv directory (typically
~/.virtualenvs/ on Unix systems). Default: "rabanalyser-venv".}

\item{python}{Character. Full path to a Python executable to use for creating
the virtual environment. If NULL (default), the function will automatically
search for a compatible Python installation (3.9-3.12) on your system.
Recommended: let auto-detection find Python 3.11 for best compatibility.}

\item{update}{Logical. If TRUE, removes any existing virtual environment with
the same name and creates a fresh one. Use this to fix a broken environment
or upgrade packages. Default: FALSE.}

\item{create}{Logical. If TRUE, creates the virtual environment if it doesn't
already exist. Set to FALSE to check for existence without creating.
Default: TRUE.}
}
\value{
Character string containing the normalized path to the Python executable
  in the virtual environment. This path can be passed to other functions that
  need to run Python code.
}
\description{
Creates or updates a Python virtual environment with all packages required
for RabAnalyser's feature extraction and clustering workflows. Automatically
detects a compatible Python installation (versions 3.9-3.12, with preference
for 3.11) and installs packages using pre-compiled binary wheels to avoid
compilation errors (particularly with llvmlite/numba dependencies).
}
\details{
This function handles the entire Python environment setup process, making it
easy to get RabAnalyser's Python backend working correctly. It will:
\itemize{
  \item Auto-detect a compatible Python installation on your system
  \item Create a virtual environment in the standard reticulate location
  \item Install all required packages (numpy, pandas, scipy, scikit-image,
    scikit-learn, umap-learn, python-igraph, leidenalg, etc.)
  \item Use binary wheels to avoid compilation issues
}


The function installs packages in groups to minimize dependency conflicts:
\enumerate{
  \item Core scientific packages: numpy, pandas, scipy, matplotlib, joblib, scikit-learn
  \item Imaging packages: scikit-image, tifffile
  \item Graph packages: python-igraph, leidenalg
  \item UMAP and dependencies: umap-learn (includes numba and llvmlite)
}

All packages are installed with the --prefer-binary flag to use pre-compiled
wheels instead of building from source, which avoids common compilation errors
with LLVM-dependent packages like llvmlite.

If the virtual environment already exists and create=TRUE, the function will
verify it exists and return the path without reinstalling packages. Use
update=TRUE to force recreation.
}
\section{Python Version Compatibility}{

RabAnalyser works best with Python 3.11, but supports 3.9-3.12. The auto-detection
prioritizes versions in this order: 3.11, 3.10, 3.12, 3.9. Python 3.13+ is not
recommended as some packages may not have binary wheels available yet.
}

\section{Troubleshooting}{

If you encounter issues:
\itemize{
  \item Try \code{setup_rabanalyser_venv(update = TRUE)} to recreate the environment
  \item Ensure you have Python 3.9-3.12 installed (check with \code{python3 --version})
  \item On macOS, install Python via Homebrew: \code{brew install python@3.11}
  \item Manually specify Python: \code{setup_rabanalyser_venv(python = "/path/to/python3.11")}
}
}

\examples{
\dontrun{
# Auto-detect Python and create virtual environment
python_path <- setup_rabanalyser_venv()

# Force recreation with auto-detected Python
python_path <- setup_rabanalyser_venv(update = TRUE)

# Use a specific Python version
python_path <- setup_rabanalyser_venv(
  python = "/usr/local/bin/python3.11",
  update = TRUE
)

# Check if environment exists without creating it
python_path <- setup_rabanalyser_venv(create = FALSE)
}
}
\seealso{
\code{\link{find_rabanalyser_python}} for the legacy interface,
  \code{\link[reticulate]{virtualenv_create}} for the underlying reticulate function
}
